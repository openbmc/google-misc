{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "362f45d3_dc9364ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000388
      },
      "writtenOn": "2024-07-18T23:20:15Z",
      "side": 1,
      "message": "Thanks, I\u0027ll let William take a final look before we submit",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18156477_27fc7f20",
        "filename": "subprojects/dhcp-done/dhcp-done.service.in",
        "patchSetId": 7
      },
      "lineNbr": 6,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2024-07-18T23:36:14Z",
      "side": 1,
      "message": "It would be better to just drop this requirement of having a file at all. Just have the specific behavior occur when the daemon gets an `ENOENT` to say there is no update happening.\n\nYou probably do want to distinguish \"ONGOING\" from \"NO_UPDATE_IN_PROGRESS\" or whatever name. I guess just the descriptive string is good enough, but it might be nice for automation to have different codes for those.",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "954ff947_149cc25e",
        "filename": "subprojects/dhcp-done/dhcp-done.service.in",
        "patchSetId": 7
      },
      "lineNbr": 6,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2024-07-19T00:45:52Z",
      "side": 1,
      "message": "We can do that and move the file creation to gbmc-br-dhcp. We can add another code NO_UPDATE_IN_PROGRESS when no file is there. But remote side might not seen it at all, since it will always trigger dhcp then read the port.",
      "parentUuid": "18156477_27fc7f20",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "044c6277_6a08443f",
        "filename": "subprojects/dhcp-done/dhcp-done.service.in",
        "patchSetId": 7
      },
      "lineNbr": 6,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2024-07-19T21:41:32Z",
      "side": 1,
      "message": "Removed the file check. Also I sent clear logs when file does not exists. Not adding a new code though since I have to check if the other side supports that, we know that it supports 0,1,2 for now.",
      "parentUuid": "954ff947_149cc25e",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e954bec9_f7afe2b0",
        "filename": "subprojects/dhcp-done/file-io.cpp",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2024-07-18T23:36:14Z",
      "side": 1,
      "message": "I would avoid locks entirely here, they can just cause contention between many readers and the writer of the update.\n\nJust use https://github.com/openbmc/stdplus/blob/master/include-fd/stdplus/fd/atomic.hpp for the writer side and you don\u0027t have to worry about any locking on the reader side. It guarantees the file contents get updated atomically by writing to a tempfile and leveraging `rename`.\n\nYou also wouldn\u0027t need to differentiate updating and creating a new file.",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1716e7d3_53757d71",
        "filename": "subprojects/dhcp-done/file-io.cpp",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2024-07-18T23:47:07Z",
      "side": 1,
      "message": "Networkd uses this along with a formatter so that numbers and formatted data can be trivially written out.\n\nhttps://github.com/openbmc/phosphor-networkd/blob/master/src/config_parser.cpp#L284",
      "parentUuid": "e954bec9_f7afe2b0",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77ce7c25_b5efc468",
        "filename": "subprojects/dhcp-done/file-io.cpp",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2024-07-19T00:45:52Z",
      "side": 1,
      "message": "atomicwriter seems a perfect fit here, our writers are mostly sequential but reader can interleave, will switch to that.",
      "parentUuid": "1716e7d3_53757d71",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aa99cdc6_17dc63e4",
        "filename": "subprojects/dhcp-done/file-io.cpp",
        "patchSetId": 7
      },
      "lineNbr": 26,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2024-07-19T21:41:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "77ce7c25_b5efc468",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "694a2301_9dee29a2",
        "filename": "subprojects/dhcp-done/file-io.cpp",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2024-07-18T23:36:14Z",
      "side": 1,
      "message": "Why even parse the message here? I would just make the file contents exactly what you want to send in the UDP message so the writer of the file is in charge of setting it up correctly and you don\u0027t need to have more code re-packing.",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee620040_2598c296",
        "filename": "subprojects/dhcp-done/file-io.cpp",
        "patchSetId": 7
      },
      "lineNbr": 37,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2024-07-19T00:45:52Z",
      "side": 1,
      "message": "It is mostly for readability/debugbility, cating the file can return us a readable status and messages (which is a command I plan to add to the remote debugging cmd).",
      "parentUuid": "694a2301_9dee29a2",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d569469d_74e74bf5",
        "filename": "subprojects/dhcp-done/update-dhcp-status.cpp",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1000188
      },
      "writtenOn": "2024-07-18T23:36:14Z",
      "side": 1,
      "message": "This is complicated enough (has arguments) that you should just use `getopt`. You can see `nemorad` for an example.",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d16e746d_98b31924",
        "filename": "subprojects/dhcp-done/update-dhcp-status.cpp",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2024-07-19T00:45:52Z",
      "side": 1,
      "message": "will do",
      "parentUuid": "d569469d_74e74bf5",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "be22aa53_4974d39d",
        "filename": "subprojects/dhcp-done/update-dhcp-status.cpp",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2024-07-19T21:41:32Z",
      "side": 1,
      "message": "After removing create, it has no argument anymore, usage is just update-dhcp-status.cpp \u003cstatus\u003e \u003cmessage\u003e",
      "parentUuid": "d16e746d_98b31924",
      "revId": "399e35072d35262cfeeb55ae2f9afbe77ca27a6d",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}