{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fe7233fb_9ce85d98",
        "filename": "subprojects/dhcp-done/update-dhcp-status.cpp",
        "patchSetId": 13
      },
      "lineNbr": 87,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2025-03-07T22:05:53Z",
      "side": 1,
      "message": "Looks like the whole purpose of this separate usage is to log this formatted message into the syslog? If that is the case then I suggest:\n1. in the gbmc-br-dhcp script have a function, take \"State\" \"Time\" \"Message\" \"Code\" \"Retries\" as input, output is a string e.g. \"formatted_log_msg\"\n2. Just call \"update-dhcp-status \u0027ONGOING\u0027 formatted_log_msg\", and output it into syslog just with echo.\n\nThis way we don\u0027t have to change this file at all, avoiding having two weird usage, and also we can avoid a different syslog entry name \"gbmc_netboot\" other than \"udhcpc6\", easy for us to corelated with the original log/error message in the process.\n\nLet me know if this simplify things a bit.",
      "range": {
        "startLine": 84,
        "startChar": 8,
        "endLine": 87,
        "endChar": 31
      },
      "revId": "3eab440aca5d96b7185de13120be6ffcc828c35a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6b77931_97993b50",
        "filename": "subprojects/dhcp-done/update-dhcp-status.cpp",
        "patchSetId": 13
      },
      "lineNbr": 87,
      "author": {
        "id": 1002184
      },
      "writtenOn": "2025-03-07T22:45:14Z",
      "side": 1,
      "message": "We could do that, reason I wanted to do that is because I intentionally wanted structured messages to appear as `gbmc_netboot` so we can easily filter it for later on analysis on cloud, if it doesn\u0027t have a tag and just tied with \"udhcpc6\" we\u0027ll have to figure out some sort of filtering and will slow down database analysis on scale. What do you think?\n\nMy only concern about adding filtering mechanism on backend instead of here where clear tag enables us to extract messages is scalability.",
      "parentUuid": "fe7233fb_9ce85d98",
      "range": {
        "startLine": 84,
        "startChar": 8,
        "endLine": 87,
        "endChar": 31
      },
      "revId": "3eab440aca5d96b7185de13120be6ffcc828c35a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f1cddfb_986a4471",
        "filename": "subprojects/dhcp-done/update-dhcp-status.cpp",
        "patchSetId": 13
      },
      "lineNbr": 87,
      "author": {
        "id": 1001693
      },
      "writtenOn": "2025-03-07T23:14:43Z",
      "side": 1,
      "message": "If you are talking about the identifier of the journal, and want to keep some logs in udhcpc6 as it is, and the formatted log as a different identifier like \"gbmc-netboot\", you can just do ```systemd-cat -t gbmc-netboot echo $formatted_log_msg ```",
      "parentUuid": "f6b77931_97993b50",
      "range": {
        "startLine": 84,
        "startChar": 8,
        "endLine": 87,
        "endChar": 31
      },
      "revId": "3eab440aca5d96b7185de13120be6ffcc828c35a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "402f26c3_210ea3ea",
        "filename": "subprojects/dhcp-done/update-dhcp-status.cpp",
        "patchSetId": 13
      },
      "lineNbr": 87,
      "author": {
        "id": 1002184
      },
      "writtenOn": "2025-03-11T15:56:07Z",
      "side": 1,
      "message": "I thought more about it, we could do it that way. However, the main reason of writing the message in this code file is not just syslog (I misread the first comment). \n\nThe main usage of this function comes in two folds:\n- writing structured message to rsyslog\n- writing structured message to statusFile\n\nI had originally made a new file (update-install-status) but per your recommendation was to combine the two since inherently it\u0027s the same function and it makes sense that way. \n\nI can also have both operations done in bash if you\u0027d prefer that and we can deprecate this completely once we move to the new workflow, I just thought this is nicely done and adding the extension to it of supporting syslog and structured data along with its function. Let me know what you\u0027d rather and I can adjust the code. :)",
      "parentUuid": "0f1cddfb_986a4471",
      "range": {
        "startLine": 84,
        "startChar": 8,
        "endLine": 87,
        "endChar": 31
      },
      "revId": "3eab440aca5d96b7185de13120be6ffcc828c35a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}